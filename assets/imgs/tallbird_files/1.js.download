

vx.show({"env":{"d":"us-west-2a","h":"i-0e97c2ee6d8f8e84c","u":"8940b726-334c-4f18-849e-d723e348ec2e","v":"1d383f0e-198b-49ac-859a-b1d0b48a281d","vl":"20210304.0734","vt":"20210304.0734","vs":"20200407","vc":"20210125","st":"20210304.075323","i":"9a1bd902-0896-4422-b0d0-9eac986cb15a","f":"https:\/\/dontstarve.fandom.com\/wiki\/Tallbird","q":"7d26e3d1-68ca-456a-90d8-281296749cdf","m":"22342","b":"430","g":"971","t":"5631","c":"5686","l":"18746","z":"17824","s":"6474","p":"22599","w":"entertainment","gc":"US","gr":"CA","gd":"807","gn":"Cable\/DSL","ne":"im","n":0,"nd":"im","nn":0,"sd":"fandom.com","se":"1645714201","nf":"iv","qp":50,"qt":2500,"pn":"4213","vn":"1593359"},"client":{"bg":7,"bn":"chrome","bv":"88","ip":"98.35.68.223","lt":"37.369801","lg":"-121.816002","gc":"US","gr":"CA","gd":"807","gn":"Cable\/DSL","gdpr":0,"ccpa":1},"content":{"body":{"short":"","long":"<div id=\"ds_player_container\" class=\"ds_hidemute\" style=\"border:none !important;padding:0 !important;margin:0 auto !important;position:relative !important\">\r\n<script data-ds-pbase=\"true\" class=\"dsscript\" type=\"text\/dsscript\" src=\"\/\/c5x8i7c7.ssl.hwcdn.net\/vplayer-parallel\/20210219_0927\/ds_vplayer_detached.min.js\"><\/script>\r\n<script src=\"\/\/c5x8i7c7.ssl.hwcdn.net\/comscore\/comscore.streaming.5.4.0.161011.min.js\" class=\"dsscript\" type=\"text\/dsscript\"><\/script>\r\n<div id=\"ds_content_frame_parent\" style=\"position:relative\">\r\n<div id=\"ds_ad_container\" style=\"text-align:center !important;margin:0 auto !important;position:absolute !important;top:0 !important;left:0 !important;background-color:black !important;z-index:-1\">&nbsp;<\/div>\r\n<iframe id=\"ds_content_frame\" title=\"ds_content_frame\" allow=\"autoplay\" frameborder=\"0\" scrolling=\"no\" src=\"\" style=\"margin:0 !important;padding:0 !important;border:0 !important;outline:0 !important;position:absolute !important;top:0 !important;left:0 !important;\"><\/iframe>\r\n<div id=\"ds_float_close\">X<\/div>\r\n<style type=\"text\/css\">.ds_hidemute.ds_mute{display:none !important}.ds_float{position:fixed!important;z-index:1000000!important;border:1px solid #888}.ds_float.tl{top:10px;left:5px}.ds_float.tr{top:10px;right:10px}.ds_float.bl{bottom:5px;left:5px}.ds_float.br{bottom:5px;right:10px}#ds_float_close{display:none;width:22px;height:22px;padding:0;position:absolute;top:-12px;right:-12px;color:#fff;background-color:#222;border:1px solid #fff;font-style:normal;font-variant:normal;font-weight:400;font-stretch:normal;font-size:10px;line-height:22px;font-family:Arial;text-shadow:#000 0 1px 0;text-align:center;vertical-align:middle;border-radius:12px;opacity:.85;cursor:pointer;z-index:1000000;transition:all .2s ease}<\/style>\r\n<\/div>\r\n<script class=\"dsscript\" type=\"text\/dsscript\">\r\n(function() {\r\nfunction init() {\r\n\tvar zindex_base=parseInt(vx.nvl(vx.dvp_zindex_base,20));\r\n\tvar title_trim=parseInt(vx.nvl(vx.dvp_title_trim,60));\r\n\tvar desc_trim=parseInt(vx.nvl(vx.dvp_desc_trim,120));\r\n\tvar mute_ad=1;\r\n\tvar click_target=vx.nvl(vx.dvp_click_target,\"_blank\");\r\n\tvar friendly_iframe=parseInt(vx.nvl(vx.dvp_friendly_iframe,0));\r\n\tvar persistentMute = (vx.dvp_persistent_mute === 1 || vx.dvp_persistent_mute === \"1\");\r\n\tvar minVol = 0;\r\n\tvar fireMRTagLater = false;\r\n\tvar ds_sbase=\"\/\/c5x8i7c7.ssl.hwcdn.net\/vplayer-parallel\/20210219_0927\/videojs\/show.html\";\r\n\tvar dvp_meta = {\"width\":\"0\",\"height\":\"0\",\"loopcount\":\"30\",\"adtags\":{\"1\":[\"prod_dt_g2_singleadunit\",\"prod_dt_pd\",\"prod_dt_gg\",\"prod_dt_rb\"]},\"adtagdefs\":{\"prod_dt_g2_singleadunit\":{\"cp\":\"g2\",\"url\":\"\\\/\\\/pubads.g.doubleclick.net\\\/gampad\\\/ads?iu=\\\/21874155133\\\/22599_7018120174&description_url={{pageurl[enc=url]}}&tfcd=0&npa=__IS_GDPR__&sz=640x480%7C1280x720%7C1920x1080%7C400x300&cust_params=dsd%3D{{env.sd}}&gdfp_req=1&output=vast&unviewed_position_start=1&env=vp&impl=s&correlator={{random}}&gdpr=__IS_GDPR__&gdpr_consent=__GDPR_CONSENT__&us_privacy=__CCPA_FLAG__\",\"wt\":\"538\",\"sdk\":\"ima_html5\"},\"prod_dt_pd\":{\"cp\":\"pd\",\"url\":\"\\\/\\\/a.jsrdn.com\\\/prebid\\\/tags\\\/p22599-ds-desktop.json?aca=1&env.sd={{env.sd}}&env.gc={{env.gc}}\",\"wt\":\"518\",\"sdk\":\"pd1_html5\"},\"prod_dt_gg\":{\"cp\":\"gg\",\"url\":\"\\\/\\\/googleads.g.doubleclick.net\\\/pagead\\\/ads?client=ca-video-pub-3851171199385532&slotname=3087495546&ad_type=standardvideo&description_url={{pageurl[enc=url]}}&max_ad_duration=60000&videoad_start_delay=0&us_privacy=__CCPA_FLAG__&gdpr=__IS_GDPR__&gdpr_consent=__GDPR_CONSENT__\",\"wt\":\"44\",\"sdk\":\"ima_html5\"},\"prod_dt_rb\":{\"cp\":\"rb\",\"url\":\"\\\/\\\/video-ads.rubiconproject.com\\\/video\\\/16578\\\/135988\\\/640652\\\/201\\\/vast.xml?tg_c.language=en&width=__DYN_WIDTH__&height=__DYN_HEIGHT__&rp_schain=1.0,1!distroscale.com,{{env.se}},1,,,&tg_i.domain={{env.sd}}&rf={{pageurl[enc=url]}}&us_privacy=__CCPA_FLAG__&gdpr=__IS_GDPR__&gdpr_consent=__GDPR_CONSENT__\",\"wt\":\"185\",\"sdk\":\"ima_html5\"}},\"vid\":{\"id\":\"1593359\",\"title\":\"Honest Game Trailers | Werewolf: The Apocalypse - Earthblood\",\"description\":\"\",\"video\":\"\\\/\\\/a.jsrdn.com\\\/videos\\\/encoded\\\/05a24a1aec0661f1af14e22a21fc11533e5ec6e2_202102240901\\\/05a24a1aec0661f1af14e22a21fc11533e5ec6e2_hb3.mp4\",\"thumbnail\":\"\\\/\\\/a.jsrdn.com\\\/videos\\\/encoded\\\/05a24a1aec0661f1af14e22a21fc11533e5ec6e2_202102240901\\\/05a24a1aec0661f1af14e22a21fc11533e5ec6e2_hb3.jpg\",\"link\":null,\"signature\":\"\",\"caption\":[{\"title\":\"Honest Game Trailers | Werewolf: The Apocalypse - Earthblood\",\"desc\":\"\",\"link\":\"https:\\\/\\\/www.youtube.com\\\/watch?v=EcSQ7UNS9hw\",\"credit\":\"\"}],\"duration\":283.7,\"iristv_guid\":\"\",\"iristv_context\":\"\",\"iristv\":null},\"playlist\":null,\"player\":null};\r\n\r\n\tdvp_meta.width=parseInt(vx.nvl(vx.dvp_width,400));\r\n\tdvp_meta.height=parseInt(vx.nvl(vx.dvp_height,225));\r\n\r\n\tdispatchVideoCdn(50);\r\n\tfunction dispatchVideoCdn(awspercent) {\r\n\t\tvar tmpint=parseInt(awspercent);\r\n\t\tif (awspercent && !isNaN(tmpint) && tmpint>0) {\r\n\t\t\tawspercent=tmpint;\r\n\t\t} else {\r\n\t\t\tawspercent=0;\r\n\t\t}\r\n\t\tvar cdn='hw';\r\n\t\tif (Math.random()*100 < awspercent) {\r\n\t\t\tcdn='aws';\r\n\t\t}\r\n\t\tfunction changeHost(url, cdn) {\r\n\t\t\tvar paths=[\r\n\t\t\t\t'a.jsrdn.com',\r\n\t\t\t\t'd14c63magvk61v.cloudfront.net',\r\n\t\t\t\t'dstroscal1.s.llnwi.net\/public',\r\n\t\t\t\t'distroscale-public.s3.amazonaws.com',\r\n\t\t\t\t's3-us-west-2.amazonaws.com\/distroscale-public',\r\n\t\t\t\t'c5x8i7c7.ssl.hwcdn.net'\r\n\t\t\t];\r\n\t\t\tvar newpath = (cdn=='hw'?paths[0]:(cdn=='aws'?paths[1]:paths[1]));\r\n\t\t\tfor (var j=0;j<paths.length;j++) {\r\n\t\t\t\tif (paths[j]!==newpath) {\r\n\t\t\t\t\turl=url.replace(new RegExp('^(https?:)?\/\/'+paths[j].replace(\/\\\/$\/,'')+'\/','gi'),'\/\/'+newpath+'\/');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn url;\r\n\t\t}\r\n\t\tif (dvp_meta && dvp_meta.vid) {\r\n\t\t\tif (dvp_meta.vid.thumbnail) {\r\n\t\t\t\tdvp_meta.vid.thumbnail = changeHost(dvp_meta.vid.thumbnail, cdn);\r\n\t\t\t}\r\n\t\t\tif (dvp_meta.vid.video) {\r\n\t\t\t\tdvp_meta.vid.video = changeHost(dvp_meta.vid.video, cdn);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (dvp_meta && dvp_meta.playlist && dvp_meta.playlist.length>0) {\r\n\t\t\tfor (var i=0; i<dvp_meta.playlist.length; i++) {\r\n\t\t\t\tif (dvp_meta.playlist[i].thumbnail) {\r\n\t\t\t\t\tdvp_meta.playlist[i].thumbnail = changeHost(dvp_meta.playlist[i].thumbnail, cdn);\r\n\t\t\t\t}\r\n\t\t\t\tif (dvp_meta.playlist[i].video) {\r\n\t\t\t\t\tdvp_meta.playlist[i].video = changeHost(dvp_meta.playlist[i].video, cdn);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction altGGParam(tag) {\r\n\t\tvar lentargets={\"s4458\":15000};  \/\/ millisec\r\n\t\tif ('s{{env.s}}' in lentargets) {\r\n\t\t\ttag=tag.replace(\/max_ad_duration=\\d+\/,\"max_ad_duration=\"+lentargets['s{{env.s}}']).replace(\/sdmax=\\d+\/,\"sdmax=\"+lentargets['s{{env.s}}']);\r\n\t\t}\r\n\t\treturn tag;\r\n\t}\r\n\r\n\treplaceVideosOnMobile();\r\n\tfunction replaceVideosOnMobile() {\r\n\t\tif (\"{{client.bg}}\"==\"1\" || \"{{client.bg}}\"==\"3\") {\r\n\t\t\tif (dvp_meta && dvp_meta.vid) {\r\n\t\t\t\tif (dvp_meta.vid.video) {\r\n\t\t\t\t\tif (!(\/\\.mb\\.mp4$\/).test(dvp_meta.vid.video)) { dvp_meta.vid.video = dvp_meta.vid.video.replace(\/\\.mp4$\/,'.mb.mp4'); }\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (dvp_meta && dvp_meta.playlist && dvp_meta.playlist.length>0) {\r\n\t\t\t\tfor (var i=0; i<dvp_meta.playlist.length; i++) {\r\n\t\t\t\t\tif (dvp_meta.playlist[i].video) {\r\n\t\t\t\t\t\tif (!(\/\\.mb\\.mp4$\/).test(dvp_meta.playlist[i].video)) { dvp_meta.playlist[i].video = dvp_meta.playlist[i].video.replace(\/\\.mp4$\/,'.mb.mp4'); }\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction getCustomParams() {\r\n\t\tif (vx.cust_param) {\r\n\t\t\tvx.debug(\"ds use: \"+vx.cust_param);\r\n\t\t\treturn vx.cust_param;\r\n\t\t}\r\n\t\tvar retVal = \"\";\r\n\t\tvar items = document.querySelectorAll('#incontent_player.gpt-ad');\r\n\t\tfor (var i=0; i<items.length; i++) {\r\n\t\t\tvar foundParams = false;\r\n\t\t\tvar params = items[i].getAttribute('data-gpt-page-params');\r\n\t\t\tif (params) {\r\n\t\t\t\tretVal = params;\r\n\t\t\t\tfoundParams = true;\r\n\t\t\t}\r\n\t\t\tparams = items[i].getAttribute('data-gpt-slot-params');\r\n\t\t\tif (params) {\r\n\t\t\t\tif (foundParams) {\r\n\t\t\t\t\tretVal = retVal.replace(\"}\", \",\") + params.replace(\"{\", \"\");\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tretVal += params;\r\n\t\t\t\t}\r\n\t\t\t\tfoundParams = true;\r\n\t\t\t}\r\n\t\t\tif (foundParams) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvx.debug(\"ds read: \"+encodeURIComponent(retVal));\r\n\t\treturn encodeURIComponent(retVal);\r\n\t}\r\n\r\n\tfunction getCustomParamsForIAS() {\r\n\t\tvar retVal = \"&useias=1&anId=930616&campId=640x480&chanId=&pubOrder=&pubId=&ias_xps=autoplayed&ias_xbp=1&ias_xar=0\";\r\n\r\n\t\tvar items = document.querySelectorAll('#incontent_player.gpt-ad');\r\n\t\tfor (var i=0; i<items.length; i++) {\r\n\t\t\tvar params = items[i].getAttribute('data-gpt-slot-params');\r\n\t\t\tif (params) {\r\n\t\t\t\tvar json_params = JSON.parse(params);\r\n\t\t\t\tretVal += \"&cm1=\";\r\n\t\t\t\tif (json_params.src) {\r\n\t\t\t\t\tretVal += json_params.src;\r\n\t\t\t\t}\r\n\t\t\t\tretVal += \"&cm2=\";\r\n\t\t\t\tif (json_params.pos) {\r\n\t\t\t\t\tretVal += json_params.pos;\r\n\t\t\t\t}\r\n\t\t\t\tretVal += \"&cm3=\";\r\n\t\t\t\tif (json_params.loc) {\r\n\t\t\t\t\tretVal += json_params.loc;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn retVal;\r\n\t}\r\n\r\n\tfunction getCustomParamsForMoat() {\r\n\t\tvar sli1 = \"\";\r\n\t\tvar sli2 = \"\";\r\n\t\tvar partnerCode = \"wikiavideodistroscale500364393303\";\r\n\t\tvar retVal = \"&usemoat=1\" + \"&sli1=\" + sli1 + \"&sli2=\" + sli2 + \"&moatpc=\" + partnerCode;\r\n\t\treturn retVal;\r\n\t}\r\n\r\n    vx.dvptrack('ww', vx.gdprMacros('{\"ww\":\"GDPR:__IS_GDPR__:__GDPR_CONSENT__:__GDPR_VENDOR__:CCPA:__IS_CCPA__:__CCPA_FLAG__\"}','ww', '{{client.gdpr}}', '{{client.ccpa}}','{{env.gc}}'));\r\n\tvar frtargets={\"s1180\":95,\"s1003\":95,\"s995\":95,\"s3663\":95,\"s597\":95,\"s1032\":95,\"s596\":95,\"s1874\":95,\"s1684\":95,\"s593\":95,\"s594\":95,\"s199\":95,\"s261\":95,\"s260\":95,\"s1109\":95,\"s417\":95,\"s1040\":95,\"s262\":95,\"s254\":95,\"s988\":95,\"s3111\":95,\"s3709\":95,\"s253\":95,\"s626\":95,\"s1685\":95,\"s3940\":50,\"s296\":50,\"s383\":50,\"s3419\":50};  \/\/ 0%~100% friendly\r\n\tvar gfrdly=0;\r\n\tif ('s{{env.s}}' in frtargets) {\r\n\t\tvar frspec=frtargets['s{{env.s}}'];\r\n\t\tvar randnumber=(Math.random()*100);\r\n\t\tif (randnumber<frspec) {\r\n\t\t\tgfrdly=1;\r\n\t\t}\r\n\t}\r\n\t\/\/window.dsGGvaldiator=function(){\r\n\t\/\/\treturn 1;\r\n\t\/\/};\r\n\tvar dsTPTagCalled = 0;\r\n\twindow.dsTPValidator = function() {\r\n\t\tif (dsTPTagCalled) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdsTPTagCalled = 1;\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t}\r\n\r\n\tfor (var tagdef in dvp_meta.adtagdefs) {\r\n\t\tif (dvp_meta.adtagdefs[tagdef].url) {\r\n\t\t\tdvp_meta.adtagdefs[tagdef].url = dvp_meta.adtagdefs[tagdef].url.replace(\/__DYN_WIDTH__\/g,dvp_meta.width).replace(\/__DYN_HEIGHT__\/g,dvp_meta.height);\r\n            dvp_meta.adtagdefs[tagdef].url = vx.gdprMacros(dvp_meta.adtagdefs[tagdef].url, dvp_meta.adtagdefs[tagdef].cp, '{{client.gdpr}}', '{{client.ccpa}}','{{env.gc}}');\r\n            dvp_meta.adtagdefs[tagdef].url = dvp_meta.adtagdefs[tagdef].url.replace(\/__IRISTV_CONTEXT__\/g,((dvp_meta.vid && dvp_meta.vid.iristv_context)?encodeURIComponent(dvp_meta.vid.iristv_context):''));\r\n\t\t\tdvp_meta.adtagdefs[tagdef].url = dvp_meta.adtagdefs[tagdef].url.replace(\/__DYNAMIC_CUSTOM_PARAMS__\/g, getCustomParams());\r\n            if(dvp_meta.adtagdefs[tagdef].url.indexOf(\"ca-video-pub-3851171199385532\") !== -1) {\r\n\t\t\t\tif (gfrdly==1) {\r\n\t\t\t\t\tdvp_meta.adtagdefs[tagdef].friendly=true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdvp_meta.adtagdefs[tagdef].friendly=false;\r\n\t\t\t\t}\r\n\t\t\t\t\/\/dvp_meta.adtagdefs[tagdef].validator=\"dsGGvaldiator\";\r\n\t\t\t\tdvp_meta.adtagdefs[tagdef].sdk=\"ima_html5\";\r\n\t\t\t\t\/\/dvp_meta.adtagdefs[tagdef].url=dvp_meta.adtagdefs[tagdef].url.replace(\/slotname=\\d+\/,\"slotname=3087495546\");  \/\/ Desktop D tag for testing\r\n\t\t\t\tif (dvp_meta.width < 400) {\r\n\t\t\t\t\tdvp_meta.adtagdefs[tagdef].url=dvp_meta.adtagdefs[tagdef].url.replace(\/slotname=\\d+\/,\"slotname=9292816986\");\r\n\t\t\t\t\tvx.dvptrack('ww', '{\"ww\":\"alternate tag for width under 400px\"}');\r\n\t\t\t\t}\r\n\t\t\t\tdvp_meta.adtagdefs[tagdef].url=altGGParam(dvp_meta.adtagdefs[tagdef].url);\r\n\t\t\t}\r\n\t\t\t\/\/ For Prebid tag add the IAS config parameters\r\n\t\t\tif (dvp_meta.adtagdefs[tagdef].cp && dvp_meta.adtagdefs[tagdef].cp=='tp') {\r\n\t\t\t\tdvp_meta.adtagdefs[tagdef].validator=\"dsTPValidator\";\r\n\t\t\t\tdvp_meta.adtagdefs[tagdef].url=dvp_meta.adtagdefs[tagdef].url+getCustomParamsForIAS() + getCustomParamsForMoat();\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (dvp_meta.adtagdefs[tagdef].cp && dvp_meta.adtagdefs[tagdef].cp in {'uf':1,'an':1,'pd':1}) {\r\n\t\t\tdvp_meta.adtagdefs[tagdef].friendly=true;\r\n\t\t}\r\n\t\tif (dvp_meta.adtagdefs[tagdef].cp && dvp_meta.adtagdefs[tagdef].cp=='tm' && 'gc{{env.gc}}' in {'gcPH':1,'gcIN':1,'gcES':1}) {\r\n\t\t\tdelete dvp_meta.adtagdefs[tagdef];\r\n\t\t}\r\n\t}\r\n\r\n\tfor (var grp in dvp_meta.adtags) {\r\n\t\tvar tarr = dvp_meta.adtags[grp];\r\n\t\tfor (var i=0;i<tarr.length;i++){\r\n\t\t\tif (!(tarr[i] in dvp_meta.adtagdefs)) {\r\n\t\t\t\ttarr.splice(i,1);\r\n\t\t\t}\r\n\t\t}\r\n\t\tdvp_meta.adtags[grp]=tarr;\r\n\t}\r\n\r\n\tvar dvpTrackName = \"dvptrack\";\r\n\r\n\tvx.dvptrack('wf', '{\"wf\":\"01: post runtime started\"}');\r\n\r\n\tfunction truncate(str, len, useWordBoundary, filler){\r\n\t\tif (filler==null) { filler='&hellip;'; }\r\n\t\tvar isTooLong = str.length > len;\r\n\t\tvar s_ = isTooLong ? str.substr(0,len-1) : str;\r\n\t\ts_ = (useWordBoundary && isTooLong) ? s_.substr(0,s_.lastIndexOf(' ')) : s_;\r\n\t\treturn isTooLong ? s_ + filler : s_;\r\n\t}\r\n\r\n\tvar contDiv = document.getElementById(\"ds_player_container\");\r\n\tif (contDiv && contDiv.style) {\r\n\t\tcontDiv.style.width = dvp_meta.width + \"px\";\r\n\t\tcontDiv.style.height = dvp_meta.height + \"px\";\r\n\t}\r\n\tvar adContDiv = document.getElementById(\"ds_ad_container\");\r\n\tif (adContDiv && adContDiv.style) {\r\n\t\tif (!vx.dockFirstResize) {\r\n\t\t\tadContDiv.style.overflow = \"hidden\";\r\n\t\t\tadContDiv.style.width = dvp_meta.width + \"px\";\r\n\t\t\tadContDiv.style.height = dvp_meta.height + \"px\";\r\n\t\t}\r\n\t}\r\n\r\n\tvx.whenAvailable2(window, 'vxvideojsinit', function() {\r\n\t\tvx.dvptrack('wf', '{\"wf\":\"03: init function available\"}');\r\n\r\n\t\tvar ctFrm = document.getElementById(\"ds_content_frame\");\r\n\t\tif (!vx.dockFirstResize) {\r\n\t\t\tctFrm.parentNode.style.width = \"\" + dvp_meta.width + \"px\";\r\n\t\t\tctFrm.parentNode.style.height = \"\" + dvp_meta.height + \"px\";\r\n\t\t\tctFrm.style.width = \"\" + dvp_meta.width + \"px\";\r\n\t\t\tctFrm.style.height = \"\" + dvp_meta.height + \"px\";\r\n\t\t}\r\n\t\tctFrm.style.top = \"0px\";\r\n\t\tctFrm.style.left = \"0px\";\r\n\t\tctFrm.style.position = \"absolute\";\r\n\t\tctFrm.style.zIndex = zindex_base;\r\n\r\n\t\tctFrm.src = ds_sbase+'?controls=1&loop=' + dvp_meta.loopcount + '&autoplay=0&autostart=1&tracker={{env.i}}&height=' + dvp_meta.height + '&width=' + dvp_meta.width + '&vurl=' + encodeURIComponent(dvp_meta.vid.video) + '&poster=' + encodeURIComponent(dvp_meta.vid.thumbnail);\r\n\r\n        \/\/ monitor cfp for inview\r\n\t\tvar contentFrameParent = document.getElementById(\"ds_content_frame_parent\");\r\n\t\tif (contentFrameParent) {\r\n\t\t\tvx.inview2.trackEl(contentFrameParent, vx.ww, function(countq, count){\r\n\t\t\t\tif (countq==1) {\r\n\t\t\t\t\tvx.dvptrack('iv2');\r\n\t\t\t\t}\r\n\t\t\t},{\r\n\t\t\t\tpercent: {{env.qp}},\r\n\t\t\t\ttime: {{env.qt}},\r\n                nofocus: 1\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tvar actionDiv=document.createElement('div');\r\n\t\tactionDiv.setAttribute(\"style\",\"width:100%;height:\"+(dvp_meta.height-32)+\"px;z-index:\"+(zindex_base+5)+\";position:absolute;top:0;left:0;\");\r\n\t\tctFrm.parentNode.insertBefore(actionDiv,ctFrm);\r\n\r\n\t\tvar capIdxLast=null;\r\n\t\tvar seekPosNext=null;\r\n\t\tvar seekPosPrev=null;\r\n\t\tfunction ctFrmSkip(pos) {\r\n\t\t\tif (pos==null) { return; }\r\n\t\t\tctFrm.contentWindow.postMessage(\"skip\"+pos, \"*\");\r\n\t\t\tvx.debug('next slide:' + pos);\r\n\t\t}\r\n\t\twindow.ds_dvp_next=function(){ ctFrmSkip(seekPosNext); };\r\n\t\twindow.ds_dvp_previous=function(){ ctFrmSkip(seekPosPrev); };\r\n\t\tfunction setSlideCaption(pos) {\r\n\t\t\tif (pos>=0 && dvp_meta.vid.caption) {\r\n\t\t\t\tvar capmeta=dvp_meta.vid.caption;\r\n\t\t\t\tvar idx=null;\r\n\t\t\t\tvar curr=0;\r\n\t\t\t\tvar total=0;\r\n\t\t\t\tvar found=0;\r\n\t\t\t\tvar keys=[];\r\n\t\t\t\tfor (var key in capmeta) {\r\n\t\t\t\t\tif (capmeta.hasOwnProperty(key) && !isNaN(tmpval=parseFloat(key)) && tmpval>=0) {\r\n\t\t\t\t\t\ttotal++;\r\n\t\t\t\t\t\tkeys.push(key);\r\n\t\t\t\t\t\tif (found==0) {\r\n\t\t\t\t\t\t\tif (pos<tmpval) {\r\n\t\t\t\t\t\t\t\tfound++;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tcurr++;\r\n\t\t\t\t\t\t\t\tidx=key;\r\n\t\t\t\t\t\t\t\tif (pos==tmpval) {\r\n\t\t\t\t\t\t\t\t\tfound++;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tseekPosNext=null;\r\n\t\t\t\tseekPosPrev=null;\r\n\t\t\t\tif (idx!==null && keys.length>0) {\r\n\t\t\t\t\tseekPosNext=keys[curr%keys.length];\r\n\t\t\t\t\tseekPosPrev=keys[(curr-2+keys.length)%keys.length];\r\n\t\t\t\t}\r\n\t\t\t\tif (idx!==null&&idx!=capIdxLast) {\r\n\t\t\t\t\t\/\/ found new caption\r\n\t\t\t\t\tcapIdxLast=idx;\r\n\r\n\t\t\t\t\tvar el_curr=vx.ww.document.querySelector(\".ds_slide_curr\");\r\n\t\t\t\t\tif (el_curr) {\r\n\t\t\t\t\t\tel_curr.innerHTML=curr;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar el_total=vx.ww.document.querySelector(\".ds_slide_total\");\r\n\t\t\t\t\tif (el_total) {\r\n\t\t\t\t\t\tel_total.innerHTML=total;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar el_title=vx.ww.document.querySelectorAll(\".ds_title\");\r\n\t\t\t\t\tif (el_title && el_title.length > 0) {\r\n\t\t\t\t\t\tfor (var i = 0; i < el_title.length; i++) {\r\n\t\t\t\t\t\t\tel_title[i].innerHTML=truncate(capmeta[idx]['title'], title_trim, true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar el_desc=vx.ww.document.querySelector(\".ds_summary\");\r\n\t\t\t\t\tif (el_desc) {\r\n\t\t\t\t\t\tel_desc.innerHTML=truncate(capmeta[idx]['desc'], desc_trim, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar el_credit=vx.ww.document.querySelector(\".ds_credit\");\r\n\t\t\t\t\tif (el_credit) {\r\n\t\t\t\t\t\tel_credit.innerHTML=capmeta[idx]['credit'];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar el_goto=vx.ww.document.querySelector(\".ds_goto\");\r\n\t\t\t\t\tvar link=capmeta[idx]['link'];\r\n\t\t\t\t\tif (!link) {\r\n\t\t\t\t\t\tlink=dvp_meta.vid.link;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (link) {\r\n\t\t\t\t\t\tvar onclickStr = \"ds_ctwrap\" + Math.floor(1000000 * Math.random());\r\n\t\t\t\t\t\twindow[onclickStr] = function() {\r\n      \t\t\t\t\tvar ctfuncUrl = {{ctfunc}}(link);\r\n\t\t\t\t\t\t\twindow.open(ctfuncUrl,click_target);\r\n\t\t\t\t\t\t\tctFrm.contentWindow.postMessage('mute', '*');\r\n\t\t\t\t\t\t\tplayer.setMute(true);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tonclickStr = onclickStr+\"();\";\r\n      \t\t\t\t\tactionDiv.setAttribute(\"onclick\", onclickStr);\r\n\t\t\t\t\t\tactionDiv.style.cursor=\"pointer\";\r\n\t\t\t\t\t\tif (el_title && el_title.length > 0) {\r\n\t\t\t\t\t\t\tfor (var i = 0; i < el_title.length; i++) {\r\n\t\t\t\t\t\t\t\tel_title[i].setAttribute(\"onclick\",onclickStr);\r\n\t\t\t\t\t\t\t\tel_title[i].style.cursor=\"pointer\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (el_desc) {\r\n\t\t\t\t\t\t\tel_desc.setAttribute(\"onclick\",onclickStr);\r\n\t\t\t\t\t\t\tel_desc.style.cursor=\"pointer\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (el_goto) {\r\n\t\t\t\t\t\t\tel_goto.setAttribute(\"onclick\",onclickStr);\r\n\t\t\t\t\t\t\tel_goto.style.cursor=\"pointer\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tactionDiv.removeAttribute(\"onclick\");\r\n\t\t\t\t\t\tactionDiv.style.cursor=\"auto\";\r\n\t\t\t\t\t\tif (el_title && el_title.length > 0) {\r\n\t\t\t\t\t\t\tfor (var i = 0; i < el_title.length; i++) {\r\n\t\t\t\t\t\t\t\tel_title[i].removeAttribute(\"onclick\");\r\n\t\t\t\t\t\t\t\tel_title[i].style.cursor=\"auto\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (el_desc) {\r\n\t\t\t\t\t\t\tel_desc.removeAttribute(\"onclick\");\r\n\t\t\t\t\t\t\tel_desc.style.cursor=\"auto\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (el_goto) {\r\n\t\t\t\t\t\t\tel_goto.removeAttribute(\"onclick\");\r\n\t\t\t\t\t\t\tel_goto.style.cursor=\"auto\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetSlideCaption(0);\r\n\r\n\t\tvar comscore=null;\r\n\t\tvar playfirst=0;\r\n\t\tvar adTimerStartAllowed=1;\r\n\t\tvx.addListener(window, 'message', function(event) {\r\n\t\t\tif (!event.origin.match(\/^https?:\\\/\\\/c5x8i7c7\\.ssl\\.hwcdn\\.net\/)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\/\/vx.debug('ds_playerframe_message:' + event.origin + \":\" + event.data);\r\n\t\t\tif (event.data && event.data.match && event.data.match(\/^playerpos[\\d\\.]+$\/)) {\r\n\t\t\t\tvar position=event.data.substr(9);\r\n\t\t\t\tif (position>=0) {\r\n\t\t\t\t\tsetSlideCaption(position);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (event.data && event.data.match && event.data.match(\/^playerstate[\\w\\.]+$\/)) {\r\n\t\t\t\tvar state=event.data.substr(11);\r\n\t\t\t\tvx.debug(\"playerstate: \"+ state);\r\n\t\t\t\tif (state=='loop') {\r\n\t\t\t\t\tvar cppEl=document.getElementById(\"ds_cpp\");\r\n\t\t\t\t\tif (cppEl) {\r\n\t\t\t\t\t\tplayer.stopAdbreak();\r\n\t\t\t\t\t\tplayer.stopAdbreakTimer();\r\n                        if (vx.checkInviewInterval) {\r\n\t                        clearInterval(vx.checkInviewInterval);\r\n                        }\r\n\t\t\t\t\t\tcppEl.parentNode.removeChild(cppEl);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\tif(comscore){\r\n\t\t\t\t\t\t\tcomscore.stop();\r\n\t\t\t\t\t\t\tvx.debug(\"comscore>>stop\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (window.ns_ && window.ns_.ReducedRequirementsStreamingAnalytics) {\r\n\t\t\t\t\t\t\tcomscore = new window.ns_.ReducedRequirementsStreamingAnalytics({publisherId:'22807838'});\r\n\t\t\t\t\t\t\tvx.debug(\"comscore>>refresh\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(comscore){\r\n\t\t\t\t\t\t\tcomscore.playVideoContentPart({ns_st_ci:dvp_meta.vid.id,ns_st_cl:parseInt(parseFloat(dvp_meta.vid.duration)*1000),ns_st_pu:\"distroscale\",c3:\"{{env.w}}\",c4:\"*null\",distroscale_guid:\"c_{{env.t}}_{{env.s}}_{{env.i}}\",c6:\"*null\",ns_st_ge:\"*null\",ns_st_ia:\"*null\",ns_st_ce:\"*null\",ns_st_ddt:\"*null\",ns_st_tdt:\"*null\"},ns_.ReducedRequirementsStreamingAnalytics.ContentType.ShortFormOnDemand);\r\n\t\t\t\t\t\t\tvx.dvptrack('cm', '{\"cm\":\"playContent\"}');\r\n\t\t\t\t\t\t\tsetTimeout(function(){vx.quantcastSegment(\"cm.content\")},1);\r\n\t\t\t\t\t\t\tvx.debug(\"comscore>>playContent\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},1);\r\n\t\t\t\t} else if (state=='pause') {\r\n\t\t\t\t\tif ('s{{env.s}}'=='s4921') {\r\n\t\t\t\t\t\t\t\/\/ for certain sites, stop ads when content is paused\r\n\t\t\t\t\t\t\tadTimerStartAllowed=0;\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tplayer.stopAdbreakTimer(); \r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\tif(comscore){\r\n\t\t\t\t\t\t\tcomscore.stop();\r\n\t\t\t\t\t\t\tvx.debug(\"comscore>>stop\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},1);\r\n\t\t\t\t} else if (state=='play') {\r\n\t\t\t\t\tif (playfirst<=0) {\r\n\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\tif (!comscore && window.ns_ && window.ns_.ReducedRequirementsStreamingAnalytics) {\r\n\t\t\t\t\t\t\t\tcomscore = new window.ns_.ReducedRequirementsStreamingAnalytics({publisherId:'22807838'});\r\n\t\t\t\t\t\t\t\tvx.debug(\"comscore>>refresh\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(comscore){\r\n\t\t\t\t\t\t\t\tcomscore.playVideoContentPart({ns_st_ci:dvp_meta.vid.id,ns_st_cl:parseInt(parseFloat(dvp_meta.vid.duration)*1000),ns_st_pu:\"distroscale\",c3:\"{{env.w}}\",c4:\"*null\",distroscale_guid:\"c_{{env.t}}_{{env.s}}_{{env.i}}\",c6:\"*null\",ns_st_ge:\"*null\",ns_st_ia:\"*null\",ns_st_ce:\"*null\",ns_st_ddt:\"*null\",ns_st_tdt:\"*null\"},ns_.ReducedRequirementsStreamingAnalytics.ContentType.ShortFormOnDemand);\r\n\t\t\t\t\t\t\t\tvx.dvptrack('cm', '{\"cm\":\"playContent\"}');\r\n\t\t\t\t\t\t\t\tsetTimeout(function(){vx.quantcastSegment(\"cm.content\")},1);\r\n\t\t\t\t\t\t\t\tvx.debug(\"comscore>>playContent\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},1);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tplayfirst--;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (state=='end') {\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\tif(comscore){\r\n\t\t\t\t\t\t\tcomscore.stop();\r\n\t\t\t\t\t\t\tvx.debug(\"comscore>>stop\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (window.ns_ && window.ns_.ReducedRequirementsStreamingAnalytics) {\r\n\t\t\t\t\t\t\tcomscore = new window.ns_.ReducedRequirementsStreamingAnalytics({publisherId:'22807838'});\r\n\t\t\t\t\t\t\tvx.debug(\"comscore>>refresh\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tfunction fireMRTagRequest() {\r\n\t\t\tvar tagurl = \"https:\/\/a.jsrdn.com\/prebid\/tags\/p22599-tp-fandom-desktop.json?aca=1&env.dyncp=__DYNAMIC_CUSTOM_PARAMS__&env.sd={{env.sd}}&env.gc={{env.gc}}\";\r\n\t\t\ttagurl = tagurl.replace(\/__DYN_WIDTH__\/g,dvp_meta.width).replace(\/__DYN_HEIGHT__\/g,dvp_meta.height);\r\n\t        tagurl = vx.gdprMacros(tagurl, 'tp', '{{client.gdpr}}', '{{client.ccpa}}','{{env.gc}}');\r\n\t        tagurl = tagurl.replace(\/__IRISTV_CONTEXT__\/g,((dvp_meta.vid && dvp_meta.vid.iristv_context)?encodeURIComponent(dvp_meta.vid.iristv_context):''));\r\n\t        tagurl = tagurl.replace(\/__DYNAMIC_CUSTOM_PARAMS__\/g, getCustomParams());\r\n\r\n\t\t\t\/\/ For tp tag add the IAS config parameters\r\n\t\t\ttagurl = tagurl + getCustomParamsForIAS() + getCustomParamsForMoat();\r\n\r\n\t\t\tvar nowtag = [{\r\n\t\t\t\tcp: \"tp\",\r\n\t\t\t\twt: \"574\",\r\n\t\t\t\tsdk: \"pd1_html5\",\r\n\t\t\t\tfriendly: true,\r\n\t\t\t\turl: tagurl\r\n\t\t\t}];\r\n\t\t\tif (adTimerStartAllowed) { player.startAdBreak(nowtag, 'mr'); }\r\n\t\t}\r\n\r\n\r\n\t\tvar player = null; \/\/ holds data from callback\r\n\t\tvar rollcount=0;\r\n\t\tvar ppEl=null;\r\n\t\tvar options = {\r\n\t\t\tminVol: minVol,\r\n\t\t\tpersistentMute: persistentMute,\r\n\t\t\treuseIframe: '1',\r\n\t\t\tplayerContainer: 'ds_player_container',\r\n\t\t\tadContainer: 'ds_ad_container',\r\n\t\t\twidth: dvp_meta.width,\r\n\t\t\theight: dvp_meta.height,\r\n\t\t\tplaylist: dvp_meta,impId: \"{{env.i}}\",\r\n\t\t\ttracker: dvpTrackName,\r\n\t\t\tzIndex: zindex_base,\r\n\t\t\tadCounterMax: 2,\r\n\t\t\tserial: true,\r\n\t\t\talltags: true,\r\n\t\t\tvolumeBehavior: (mute_ad ? 'mute' : 'volume'),\r\n\t\t\tfriendlyIframe: friendly_iframe,\r\n\t\t\tcontentMute: function() {\r\n\t\t\t\tvx.debug(\"client - mute fn\");\r\n\t\t\t\tctFrm.contentWindow.postMessage(\"mute\", \"*\");\r\n\t\t\t},\r\n\t\t\tcontentUnmute: function() {\r\n\t\t\t\tvx.debug(\"client - unmute fn\");\r\n\t\t\t\tctFrm.contentWindow.postMessage(\"unmute\", \"*\");\r\n\t\t\t},\r\n\t\t\tcontentPause: function(adManager) {\r\n\t\t\t\tvx.debug(\"client - pause fn\");\r\n\t\t\t\tvx.adManager = adManager;\r\n\t\t\t\tvx.adPlaying = 1;\r\n\t\t\t\tif (ppEl) {\r\n\t\t\t\t\tppEl.style.display='block';\r\n\t\t\t\t\tppEl.setAttribute('data-adpp_status','play');\r\n\t\t\t\t}\r\n\t\t\t\tcontDiv.className=contDiv.className?contDiv.className.replace(new RegExp('(^|\\\\b)(ds_hidemute)(\\\\b|$)','gi'),' '):'';\r\n\t\t\t\tif (vx.floatOnAdStart){\r\n\t\t\t\t\tvx.floatOnAdStart();\r\n\t\t\t\t}\r\n\t\t\t\tadContDiv.style.zIndex = zindex_base+7;\r\n\t\t\t\tctFrm.contentWindow.postMessage(\"pause\", \"*\");\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tif (vx.adPlaying) {\r\n\t\t\t\t\t\tvar covers=vx.ww.document.querySelectorAll(\".ds_advert_cover\");\r\n\t\t\t\t\t\tif (covers && covers.length > 0) {\r\n\t\t\t\t\t\t\tfor (var i = 0; i < covers.length; i++) {\r\n\t\t\t\t\t\t\t\tcovers[i].style.display=\"block\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},1000);\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tif(comscore){\r\n\t\t\t\t\t\tcomscore.stop();\r\n\t\t\t\t\t\tvx.debug(\"comscore>>stop\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!comscore && window.ns_ && window.ns_.ReducedRequirementsStreamingAnalytics) {\r\n\t\t\t\t\t\tcomscore = new window.ns_.ReducedRequirementsStreamingAnalytics({publisherId:'22807838'});\r\n\t\t\t\t\t\tvx.debug(\"comscore>>refresh\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(comscore){\r\n\t\t\t\t\t\trollcount++;\r\n\t\t\t\t\t\tcomscore.playVideoAdvertisement({ns_st_cl:\"0\",c4:\"*null\",distroscale_guid:\"a_{{env.t}}_{{env.s}}_{{env.i}}\"},rollcount>1?ns_.ReducedRequirementsStreamingAnalytics.AdType.LinearOnDemandMidRoll:ns_.ReducedRequirementsStreamingAnalytics.AdType.LinearOnDemandPreRoll);\r\n\t\t\t\t\t\tvx.dvptrack('cm', '{\"cm\":\"playAd\"}');\r\n\t\t\t\t\t\tsetTimeout(function(){vx.quantcastSegment(\"cm.ad\")},1);\r\n\t\t\t\t\t\tvx.debug(\"comscore>>playAd\");\r\n\t\t\t\t\t}\r\n\t\t\t\t},1);\r\n\t\t\t\tif (vx.pushHalfUp && typeof vx.pushHalfUp === \"function\") {\r\n\t\t\t\t\tvx.pushHalfUp();\r\n\t\t\t\t}\r\n\t\t\t\tif (vx.dockCheckInview && typeof vx.dockCheckInview === \"function\") {\t\t\r\n\t\t\t\t\tvx.dockCheckInview(\"contentpause\");\t\t\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcontentPlay: function() {\r\n\t\t\t\tvx.debug(\"client - play fn\");\r\n\t\t\t\tvx.adPlaying = 0;\r\n\t\t\t\tif (ppEl) {\r\n\t\t\t\t\tppEl.style.display='none';\r\n\t\t\t\t\tppEl.setAttribute('data-adpp_status','');\r\n\t\t\t\t}\r\n\t\t\t\tcontDiv.className=contDiv.className?(contDiv.className.match(\/(^|\\b)ds_hidemute(\\b|$)\/)?contDiv.className:(contDiv.className+' ds_hidemute')):'ds_hidemute';\r\n\t\t\t\tadContDiv.style.zIndex = -1;\r\n\t\t\t\tctFrm.contentWindow.postMessage(\"play\", \"*\");\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tif (vx.adPlaying==0) {\r\n\t\t\t\t\t\tvar covers=vx.ww.document.querySelectorAll(\".ds_advert_cover\");\r\n\t\t\t\t\t\tif (covers && covers.length > 0) {\r\n\t\t\t\t\t\t\tfor (var i = 0; i < covers.length; i++) {\r\n\t\t\t\t\t\t\t\tcovers[i].style.display=\"none\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},1);\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tif(comscore){\r\n\t\t\t\t\t\tcomscore.stop();\r\n\t\t\t\t\t\tvx.debug(\"comscore>>stop\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!comscore && window.ns_ && window.ns_.ReducedRequirementsStreamingAnalytics) {\r\n\t\t\t\t\t\tcomscore = new window.ns_.ReducedRequirementsStreamingAnalytics({publisherId:'22807838'});\r\n\t\t\t\t\t\tvx.debug(\"comscore>>refresh\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(comscore){\r\n\t\t\t\t\t\tcomscore.playVideoContentPart({ns_st_ci:dvp_meta.vid.id,ns_st_cl:parseInt(parseFloat(dvp_meta.vid.duration)*1000),ns_st_pu:\"distroscale\",c3:\"{{env.w}}\",c4:\"*null\",distroscale_guid:\"c_{{env.t}}_{{env.s}}_{{env.i}}\",c6:\"*null\",ns_st_ge:\"*null\",ns_st_ia:\"*null\",ns_st_ce:\"*null\",ns_st_ddt:\"*null\",ns_st_tdt:\"*null\"},ns_.ReducedRequirementsStreamingAnalytics.ContentType.ShortFormOnDemand);\r\n\t\t\t\t\t\tvx.dvptrack('cm', '{\"cm\":\"playContent\"}');\r\n\t\t\t\t\t\tsetTimeout(function(){vx.quantcastSegment(\"cm.content\")},1);\r\n\t\t\t\t\t\tvx.debug(\"comscore>>playContent\");\r\n\t\t\t\t\t}\r\n\t\t\t\t},1);\r\n                if (vx.dockCheckInview && typeof vx.dockCheckInview === \"function\") {\t\t\r\n\t\t\t\t\tvx.dockCheckInview(\"contentplay\");\t\t\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcontentSetVolume: function(vol) {\r\n\t\t\t\tvx.debug(\"client - set volume:\" + vol);\r\n\t\t\t\tctFrm.contentWindow.postMessage(\"setVolume:\" + vol, \"*\");\r\n\t\t\t},\r\n\t\t\tadFinished: function() {\r\n\t\t\t\t\/\/ this needs to be called after an ad finishes\r\n\t\t\t\t\/\/ or after an error\r\n\t\t\t\tvx.debug(\"***AdBreak finished\");\r\n\t\t\t\tvx.adPlaying = 0;\r\n\t\t\t\tcontDiv.className=contDiv.className?(contDiv.className.match(\/(^|\\b)ds_hidemute(\\b|$)\/)?contDiv.className:(contDiv.className+' ds_hidemute')):'ds_hidemute';\r\n\t\t\t\t\r\n\t\t\t\t\/\/ Check if we need to fire a MR tag here\r\n\t\t\t\tif (fireMRTagLater) {\r\n\t\t\t\t\tfireMRTagLater = false;\r\n\t\t\t\t\tfireMRTagRequest();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tplaylistFinished: function() {\r\n\t\t\t\tvx.adPlaying = 0;\r\n\t\t\t\tcontDiv.className=contDiv.className?(contDiv.className.match(\/(^|\\b)ds_hidemute(\\b|$)\/)?contDiv.className:(contDiv.className+' ds_hidemute')):'ds_hidemute';\r\n\t\t\t\tvx.debug(\"***AdBreak playlist over\");\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tif(comscore){\r\n\t\t\t\t\t\tcomscore.stop();\r\n\t\t\t\t\t\tvx.debug(\"comscore>>stop\");\r\n\t\t\t\t\t}\r\n\t\t\t\t},1);\r\n\t\t\t}\r\n\t\t};\r\n\t\tsetTimeout(function(){\r\n\t\t\tif (!comscore && window.ns_ && window.ns_.ReducedRequirementsStreamingAnalytics) {\r\n\t\t\t\tcomscore = new window.ns_.ReducedRequirementsStreamingAnalytics({publisherId:'22807838'});\r\n\t\t\t\tvx.debug(\"comscore>>refresh\");\r\n\t\t\t}\r\n\t\t\tif(comscore){\r\n\t\t\t\tplayfirst++;\r\n\t\t\t\tcomscore.playVideoContentPart({ns_st_ci:dvp_meta.vid.id,ns_st_cl:parseInt(parseFloat(dvp_meta.vid.duration)*1000),ns_st_pu:\"distroscale\",c3:\"{{env.w}}\",c4:\"*null\",distroscale_guid:\"c_{{env.t}}_{{env.s}}_{{env.i}}\",c6:\"*null\",ns_st_ge:\"*null\",ns_st_ia:\"*null\",ns_st_ce:\"*null\",ns_st_ddt:\"*null\",ns_st_tdt:\"*null\"},ns_.ReducedRequirementsStreamingAnalytics.ContentType.ShortFormOnDemand);\r\n\t\t\t\tvx.dvptrack('cm', '{\"cm\":\"playContent\"}');\r\n\t\t\t\tsetTimeout(function(){vx.quantcastSegment(\"cm.content\")},1);\r\n\t\t\t\tvx.debug(\"comscore>>playContent\");\r\n\t\t\t}\r\n\t\t},1);\r\n\t\twindow.vxvideojsinit(options, function(po) {\r\n\t\t\tvx.debug(\"vxvideojsinit callback invoked!\");\r\n\t\t\tvx.debug(po);\r\n\t\t\tplayer = po;\r\n\r\n            player.setAdWillAutoPlay(true);\r\n\t\t\tplayer.setAdWillPlayMuted(true);\r\n\r\n\t\t\t\/\/ configurable - time in seconds between ad breaks\r\n\t\t\tif (adTimerStartAllowed) { player.startAdbreakTimer(20); }\r\n\r\n\t\t\t\/\/ Float the unit\r\n\t\t\tvar floatSpec = null;\r\n\t\t\tif(vx.dvp_float_spec){\r\n\t\t\t\tfloatSpec = vx.dvp_float_spec;\r\n\t\t\t}\r\n\t\t\tvar floatSpecFirst = null;\r\n\t\t\tif(vx.dvp_float_spec_first){\r\n\t\t\t\tfloatSpecFirst = vx.dvp_float_spec_first;\r\n\t\t\t}\r\n\t\t\tvar closeScope = null;\r\n\t\t\tif(vx.dvp_close_scope){\r\n\t\t\t\tcloseScope=vx.dvp_close_scope;\r\n\t\t\t}\r\n\r\n\t\t\tvar needClose=0; \/\/ Need explicit close, interstitial\r\n\t\t\tvar canFloat=0; \/\/ whether to allow automatic float\r\n\t\t\tvar fpEl=document.getElementById(\"ds_content_frame_parent\");\r\n\t\t\tif (fpEl) {\r\n\t\t\t\twindow.ds_float_close=function(id){\r\n\t\t\t\t\tvar el=document.getElementById(id);\r\n\t\t\t\t\tif (el) {\r\n\t\t\t\t\t\tendFloat(el);\r\n\t\t\t\t\t\tif (closeScope==\"pageview\") {\r\n\t\t\t\t\t\t\tcanFloat=-1;  \/\/ disable the whole forever\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcanFloat=0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\r\n\t\t\t\tfunction endFloat(el) {\r\n\t\t\t\t\tel.className=el.className?el.className.replace(new RegExp('(^|\\\\b)(ds_float)(\\\\b|$)','gi'),' '):'';\r\n\t\t\t\t\tel.className=el.className?el.className.replace(new RegExp('(^|\\\\b)(tl|tr|bl|br|ct)(\\\\b|$)','gi'),' '):'';\r\n\t\t\t\t\tel.style.width=dvp_meta.width+\"px\";\r\n\t\t\t\t\tel.style.height=dvp_meta.height+\"px\";\r\n\t\t\t\t\tvar adEl=document.getElementById(\"ds_ad_container\");\r\n\t\t\t\t\tif (adEl) {\r\n\t\t\t\t\t\tadEl.style.width=dvp_meta.width+\"px\";\r\n\t\t\t\t\t\tadEl.style.height=dvp_meta.height+\"px\";\r\n\t\t\t\t\t\tif(vx.adManager && vx.adManager.activeAd && vx.adManager.activeAd.ifr){\r\n\r\n\t\t\t\t\t\t\tvx.adManager.sendMessage(vx.adManager.activeAd.ifr, \"resizeMe\", {\r\n\t\t\t\t\t\t\t\t\"width\": dvp_meta.width,\r\n\t\t\t\t\t\t\t\t\"height\": dvp_meta.height\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar ctEl=document.getElementById(\"ds_content_frame\");\r\n\t\t\t\t\tif (ctEl) {\r\n\t\t\t\t\t\tctEl.style.width=dvp_meta.width+\"px\";\r\n\t\t\t\t\t\tctEl.style.height=dvp_meta.height+\"px\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar clsEl=document.getElementById(\"ds_float_close\");\r\n\t\t\t\t\tif (clsEl) {\r\n\t\t\t\t\t\tclsEl.style.display=\"none\";\r\n\t\t\t\t\t\tclsEl.setAttribute(\"onclick\",\"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfunction startFloat(el,style) {\r\n\t\t\t\t\tif (canFloat!=1) { return; }\r\n\t\t\t\t\tvar styleArr=style.split('\/');\r\n\t\t\t\t\tel.className=el.className?(el.className+' ds_float '+styleArr[0]):'ds_float '+styleArr[0];\r\n\t\t\t\t\tel.style.width=styleArr[1]+\"px\";\r\n\t\t\t\t\tel.style.height=styleArr[2]+\"px\";\r\n\t\t\t\t\tvar adEl=document.getElementById(\"ds_ad_container\");\r\n\t\t\t\t\tif (adEl) {\r\n\t\t\t\t\t\tadEl.style.width=styleArr[1]+\"px\";\r\n\t\t\t\t\t\tadEl.style.height=styleArr[2]+\"px\";\r\n\t\t\t\t\t\tif(vx.adManager && vx.adManager.activeAd && vx.adManager.activeAd.ifr){\r\n\t\t\t\t\t\t\tvx.adManager.sendMessage(vx.adManager.activeAd.ifr, \"resizeMe\", {\r\n\t\t\t\t\t\t\t\t\"width\": styleArr[1],\r\n\t\t\t\t\t\t\t\t\"height\": styleArr[2]\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar ctEl=document.getElementById(\"ds_content_frame\");\r\n\t\t\t\t\tif (ctEl) {\r\n\t\t\t\t\t\tctEl.style.width=styleArr[1]+\"px\";\r\n\t\t\t\t\t\tctEl.style.height=styleArr[2]+\"px\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar clsEl=document.getElementById(\"ds_float_close\");\r\n\t\t\t\t\tif (clsEl) {\r\n\t\t\t\t\t\tclsEl.style.display=\"block\";\r\n\t\t\t\t\t\tclsEl.setAttribute(\"onclick\",\"ds_float_close('ds_content_frame_parent')\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (floatSpec) {\r\n\t\t\t\t\tvx.inview2.trackEl(\"ds_player_container\",window,null,{\r\n\t\t\t\t\t\tcbqualify: function(countq, count){ },\r\n\t\t\t\t\t\tcbenter: function(count){\r\n\t\t\t\t\t\t\tif (needClose === 0) {\r\n\t\t\t\t\t\t\t\tendFloat(fpEl);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcbleave: function(count){\r\n\t\t\t\t\t\t\tif (canFloat==1) {\r\n\t\t\t\t\t\t\t\tstartFloat(fpEl,floatSpec);\r\n\t\t\t\t\t\t\t} else if (canFloat === 0) {\r\n\t\t\t\t\t\t\t\tif (vx.adPlaying==1) {\r\n\t\t\t\t\t\t\t\t\tcanFloat=1;\r\n\t\t\t\t\t\t\t\t\tstartFloat(fpEl,floatSpec);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tvx.floatOnAdStart=function(){\r\n\t\t\t\t\t\t\t\t\t\tvx.floatOnAdStart=function(){};\r\n\t\t\t\t\t\t\t\t\t\tcanFloat=1;\r\n\t\t\t\t\t\t\t\t\t\tstartFloat(fpEl,floatSpec);\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tnofocus: 1,\r\n\t\t\t\t\t\tpercent: 50,\r\n\t\t\t\t\t\ttime: 1\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (floatSpecFirst) {\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\tcanFloat=1;\r\n\t\t\t\t\t\tstartFloat(fpEl,floatSpecFirst);\r\n\t\t\t\t\t\tif (floatSpecFirst.match(\/ct\\\/\/)) {\r\n\t\t\t\t\t\t\tneedClose=1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},100);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t\/\/ trigger ad call when unit comes into view\r\n\t\t\tvar trackDiv=document.createElement(\"div\");\r\n\t\t\ttrackDiv.id=\"ds_player_sensor\";\r\n\t\t\ttrackDiv.setAttribute(\"style\",\"width:1px;height:1px;padding:0;margin:0;border:none;background:none;position:relative;\");\r\n\t\t\tcontDiv.parentNode.insertBefore(trackDiv,contDiv);\r\n\t\t\tvar inviewFired = false;\r\n\t\t\tvx.inview2.trackEl(trackDiv, window, function () {\r\n\t\t\t\tif (!inviewFired) {\r\n\t\t\t\t\tinviewFired = true;\r\n\t\t\t\t\tvx.dvptrack('wf', '{\"wf\":\"99: inview ad call\"}');\r\n\t\t\t\t\tif (!vx.adPlaying) {\r\n\t\t\t\t\t\tfireMRTagRequest();\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tfireMRTagLater = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t} \/\/ firedTest\r\n\t\t\t}, {\r\n\t\t\t\t\/\/nofocus: 1, \/\/ for debugging only\r\n\t\t\t\tpercent: 1,  \/\/ percent of player viewable\r\n\t\t\t\ttime: 1  \/\/ time in ms to be visible\r\n\t\t\t});\r\n\r\n\t\t\t\/\/ configure mouse enter\/leave to unmute\/mute\r\n\t\t\tif (!mute_ad) {\r\n\t\t\t\tvx.addListener(contDiv, \"mouseenter\", function(event) {\r\n\t\t\t\t\tvx.debug(\"mouseenter,unmute\");\r\n\t\t\t\t\tplayer.setMute(false);\r\n\t\t\t\t});\r\n\t\t\t\tvx.addListener(contDiv, \"mouseleave\", function(event) {\r\n\t\t\t\t\tvx.debug(\"mouseleave, mute\");\r\n\t\t\t\t\tplayer.setMute(true);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tvar muteEl=document.getElementById('ds_mute');\r\n\t\t\t\tif (muteEl) {\r\n\t\t\t\t\t\/\/ clone muteEl to peel\r\n\t\t\t\t\tppEl=muteEl.cloneNode(true);\r\n\t\t\t\t\tppEl.id='ds_adpp';\r\n\t\t\t\t\tppEl.className='';\r\n\t\t\t\t\tppEl.style.display='none';\r\n\t\t\t\t\tppEl.style.backgroundImage='url(data:image\/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAAk5JREFUSA3dlLuKFUEURa9PTERRMDAzUgYRQ0MNRMTEeNBAcSIzMxMz\/8BIEMQ\/EMTIzNhA\/QFB8YGOICi+H2t1166pafrC7cFEN+yuU6dOnVdV12z2v2HTBgvazL7s\/Y38q\/iZp69htiDJRaCzIQyawO1a1VWhrMZJMmw3KWtvBfsKGWYf4HMFsBfuh+7\/BJ\/BdbjO7EKj2drIEZPEERTvoc6+QwOfggZ\/U+bfyniOsUKn76AbbsA43IbcIsEvodT2B0yga8gniv5nWdPmNuygU9ux2k9nlxkfwYNQJ55bAiN2UC90lBZ\/RTawaPWfe9Wak2T\/hYWj8Ak8D81OZ6kGsR66CUqRhJWHenU1W7MQ26EZO96BN6FOzDbJIE7HsC160KFV6HwFPoaHYG0D8mSMBdKJetvl7TkMn8KLUKRd\/WzBb9v7sS220MoMfAvaYq\/2ZMyrqHWk89i9RV70BWl9VAfrlGViAC+GZ+aPeBLeg7vhZCTT4Ubb5VkY5D5cgg+g8MpPxlggq8jZXUU+Az2XHVD8lctgJV6AF3AZPoT5AV0T+ecytrrOYOxjRTpKOwxyF3qlDWLrRJ6aftZ\/DdQGy5q2sa\/rBjJIDvgK8lno028Q21iNkUVunesmJmx1WqocfUZtOqzwPd6L3YY4K6puyHkeYOYP7FV\/DV\/CY3An9EH2gVb3Cp6GHdL\/ZG02Vph5b7X21d41g+6Czj9CX5BgD4I2Plk+0tmD2Jc+VkW3OPikslatTodDVNuxxaHx2Nx92Wv26cA8\/ZiPf1z3B2jWdlGAoZLaAAAAAElFTkSuQmCC)';\r\n\t\t\t\t\tvar muteElTop=window.getComputedStyle(muteEl).top;\r\n\t\t\t\t\tppEl.style.top=''+(parseInt(muteElTop)+parseInt(muteEl.style.height))+'px';\r\n\t\t\t\t\tvar muteElLeft=window.getComputedStyle(muteEl).left;\r\n\t\t\t\t\tppEl.style.left=''+(parseInt(muteElLeft))+'px';\r\n\t\t\t\t\tvx.addListener(ppEl, 'click', function(event) {\r\n\t\t\t\t\t\tvx.debug('adpp clicked');\r\n\t\t\t\t\t\tif (player) {\r\n\t\t\t\t\t\t\tvar ppstatus=ppEl.getAttribute('data-adpp_status');\r\n\t\t\t\t\t\t\tif (ppstatus=='play') {\r\n\t\t\t\t\t\t\t\tplayer.pauseAd();\r\n\t\t\t\t\t\t\t\tppEl.setAttribute('data-adpp_status','pause');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tplayer.resumeAd();\r\n\t\t\t\t\t\t\t\tppEl.setAttribute('data-adpp_status','play');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tmuteEl.parentNode.insertBefore(ppEl, muteEl.nextSibling);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvx.dvptrack('wf', '{\"wf\":\"98: init function exit\"}');\r\n\t\t});\r\n\t});\r\n\r\n\tvx.dvptrack('wf', '{\"wf\":\"99: outside init function\"}');\r\n}\r\n\r\n\twindow.dvptrack=function(name,extra) {\r\n\t\tif (name == 'wf' || name == 'wc' || name == 'cm' || name == 'wwb') {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar tmpStr=null;\r\n\t\ttry {\r\n\t\t\ttmpStr = JSON.stringify(extra);\r\n\t\t\tvx.debug(\"!>>> \" + name + \" : \" + tmpStr);\r\n\t\t} catch(e) {\r\n\t\t\ttmpStr = null;\r\n\t\t}\r\n\t\tif (name == 'we' && tmpStr && (typeof tmpStr==='string') && (!tmpStr.match(\/\"cp\":\"pd\",\/i)) && tmpStr.match(\/(error \\\/ no response|1009|no ads)\/i)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar funcName='vxtrack{{env.i}}';\r\n\t\tif (window[funcName]) {\r\n\t\t\twindow[funcName](name,extra);\r\n\t\t}\r\n\t};\r\n\tvx.dvptrack=window.dvptrack;\r\n\r\n\tvx.nvl=function(a,b) {\r\n\t\tif (a===null || a===\"\" || a===undefined) { return b; }\r\n\t\treturn a;\r\n\t};\r\n\r\n\tvar cppEl=document.getElementById(\"ds_cpp\");\r\n\tif (cppEl) {\r\n\t\tvx.dvp_zindex_base=cppEl.getAttribute('data-dvp_zindex_base');\r\n\t\tvx.dvp_title_trim=cppEl.getAttribute('data-dvp_title_trim');\r\n\t\tvx.dvp_desc_trim=cppEl.getAttribute('data-dvp_desc_trim');\r\n\t\tvx.dvp_mute_ad=cppEl.getAttribute('data-dvp_mute_ad');\r\n\t\tvx.dvp_click_target=cppEl.getAttribute('data-dvp_click_target');\r\n\t\tvx.dvp_friendly_iframe=cppEl.getAttribute('data-dvp_friendly_iframe');\r\n\t\tvx.dvp_delay_init=cppEl.getAttribute('data-dvp_delay_init');\r\n\t\tvx.dvp_float_spec=cppEl.getAttribute('data-dvp_float_spec');\r\n\t\tvx.dvp_float_spec_first=cppEl.getAttribute('data-dvp_float_spec_first');\r\n\t\tvx.dvp_close_scope=cppEl.getAttribute('data-dvp_close_scope');\r\n\t\tvx.dvp_persistent_mute=cppEl.getAttribute('data-dvp_persistent_mute');\r\n\t\tvx.dvp_min_volume=cppEl.getAttribute('data-dvp_min_volume');\r\n\t}\r\n\r\n\tvar dvp_init=function(){\r\n\t\tvar contEl=document.getElementById(\"ds_player_container\");\r\n\t\tif (contEl) {\r\n\t\t\t\/\/ Responsive width\/height\r\n\t\t\tvx.dvp_width=400;\r\n\t\t\tvx.dvp_height=225;\r\n\t\t\tvar dimEx=contEl.outerHTML.match(\/var dvp_meta = \\{\"width\":\"?([^\",]+)\"?,\"height\":\"?([^\",]+)\"?,\/);\r\n\t\t\tif (dimEx&&dimEx.length>2) {\r\n\t\t\t\tvx.dvp_width=dimEx[1];\r\n\t\t\t\tvx.dvp_height=dimEx[2];\r\n\t\t\t}\r\n\t\t\tif (vx.dvp_width=='0') {\r\n\t\t\t\tvx.dvp_width=contEl.parentNode.clientWidth;\r\n\t\t\t\tif(vx.dvp_width === 0){\r\n\t\t\t\t\tvx.dvp_width=contEl.parentNode.offsetWidth;\r\n\t\t\t\t}\r\n\t\t\t\tvx.dvp_width=Math.max(Math.min(vx.dvp_width,1000),300);\r\n\t\t\t} else {\r\n\t\t\t\tvx.dvp_width=parseInt(vx.dvp_width);\r\n\t\t\t}\r\n\t\t\tif (vx.dvp_height=='0') {\r\n\t\t\t\tvx.dvp_height='16:9';  \/\/ default aspect ratio\r\n\t\t\t}\r\n\t\t\tif (typeof vx.dvp_height==='string' && vx.dvp_height.match(\/^ *(\\d+):(\\d+) *$\/)) {\r\n\t\t\t\tvar ar = vx.dvp_height.match(\/^ *(\\d+):(\\d+) *$\/);\r\n\t\t\t\tvar ratio = 1 \/ (ar[1] \/ ar[2]);\r\n\t\t\t\tvx.dvp_height=Math.round(vx.dvp_width * ratio);\r\n\t\t\t} else {\r\n\t\t\t\tvx.dvp_height=parseInt(vx.dvp_height);\r\n\t\t\t}\r\n\t\t\tif (vx.dvp_width>=400) {\r\n\t\t\t\tvx.dvp_height=Math.max(vx.dvp_height,225);\r\n\t\t\t}\r\n\t\t\tvx.dvptrack('ws','{\"ws\":\"00: size '+vx.dvp_width+','+vx.dvp_height+'\"}');\r\n\r\n\t\t\tif ({{client.gdpr}}) {\r\n\t\t\t\t\/\/ wait till the vx.found_gdpr_consent to be available\r\n\t\t\t\tvar gdprDelayInt = setInterval(function() {\r\n\t\t\t\t\tif ('found_gdpr_consent' in vx) {\r\n\t\t\t\t\t\tclearInterval(gdprDelayInt);\r\n\t\t\t\t\t\tgdprDelayInt = null;\r\n\t\t\t\t\t\tclearTimeout(gdprDelayTo);\r\n\t\t\t\t\t\tgdprDelayTo=null;\r\n\r\n\t\t\t\t\t\tinit();\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 500);\r\n\t\t\t\tvar gdprDelayTo = setTimeout(function(){\r\n\t\t\t\t\tclearInterval(gdprDelayInt);\r\n\t\t\t\t\tgdprDelayInt = null;\r\n\t\t\t\t\tclearTimeout(gdprDelayTo);\r\n\t\t\t\t\tgdprDelayTo=null;\r\n\r\n\t\t\t\t\tinit();\r\n\t\t\t\t},10000);\r\n\t\t\t}\r\n\t\t\t\/*\r\n\t\t\telse if ({{client.ccpa}}) {\r\n\t\t\t\t\/\/ wait till the vx.found_ccpa_flag to be available\r\n\t\t\t\tvar ccpaDelayInt = setInterval(function() {\r\n\t\t\t\t\tif ('found_ccpa_flag' in vx) {\r\n\t\t\t\t\t\tclearInterval(ccpaDelayInt);\r\n\t\t\t\t\t\tccpaDelayInt = null;\r\n\t\t\t\t\t\tclearTimeout(ccpaDelayTo);\r\n\t\t\t\t\t\tccpaDelayTo=null;\r\n\r\n\t\t\t\t\t\tinit();\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 500);\r\n\t\t\t\tvar ccpaDelayTo = setTimeout(function(){\r\n\t\t\t\t\tclearInterval(ccpaDelayInt);\r\n\t\t\t\t\tccpaDelayInt = null;\r\n\t\t\t\t\tclearTimeout(ccpaDelayTo);\r\n\t\t\t\t\tccpaDelayTo=null;\r\n\r\n\t\t\t\t\tinit();\r\n\t\t\t\t},10000);\r\n\t\t\t}\r\n\t\t\t*\/\r\n\t\t\telse {\r\n\t\t\t\tinit();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tif (vx.dvp_delay_init>0) {\r\n\t\tvar initialized=0;\r\n\t\tvar intDelay=setInterval(function(){\r\n\t\t\tif (vx.dvp_delay_ready==1) {\r\n\t\t\t\tclearInterval(intDelay);\r\n\t\t\t\tintDelay=null;\r\n\t\t\t\tif (initialized==0) {\r\n\t\t\t\t\tinitialized=1;\r\n\t\t\t\t\tdvp_init();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},500);\r\n\t\tsetTimeout(function(){\r\n\t\t\tclearInterval(intDelay);\r\n\t\t\tintDelay=null;\r\n\t\t\tif (initialized==0) {\r\n\t\t\t\tinitialized=1;\r\n\t\t\t\tdvp_init();\r\n\t\t\t}\r\n\t\t},vx.dvp_delay_init);\r\n\t} else {\r\n\t\tdvp_init();\r\n\t}\r\n\r\n})();\r\n<\/script><\/div>"},"author":{"link":"","affiliate":"","name":""},"tracker_summary":"","tracker_full":"","sponsor":{"img2":"","link":"","name":"","img":""},"link":null,"tracker_click":"","video":{"duration":null,"sound":"0","link":null,"id":null,"provider":null},"img":{"large_sq":"","small_land":"","large_land":"","large_wide":"","large_port":"","small_wide":"","small_sq":"","small_port":"","banner":null,"share":null},"title":"Honest Game Trailers | Werewolf: The Apocalypse - Earthblood","label":"","adkey":"playerv2:<default>,30,0,0,prod_desktop_prebid","tracker_inview":"","post_id":"5631","sponsored":"1","tracker_piggyback":"0","trackers":{"inview":"","full":"","click":"","summary":""}},"template":{"slot_id":"18746","selector":"#incontent_player","template":"<div id=\"ds_cpp\" class=\"ds_cpp ds_cpp_width\" data-dvp_reel_position=\"top\" data-dvp_title_trim=\"90\" data-dvp_desc_trim=\"40\" data-dvp_zindex_base=\"1\" style=\"position: relative;clear: both;  max-height: none;z-index: 1;  border-left: none;border-right: none; transition: height 0.5s;  overflow: hidden; max-width: 645px;\" data-dvp_reel_thumbs=\"3\" data-dvp_reel_clickout=\"1\" data-dvp_dockspec=\"br\/320\/180\" data-dvp_docktrigger=\"oov\" data-dvp_closescope=\"pageview\" data-dvp_closedelay=\"1\" data-dvp_dockavoidtouch  =\"#PageHeader\" data-dvp_dockavoidbelow  =\"#mixed-content-footer\">\r\n   <style>\r\n#ds_float_close{border: none !important; top: -20px !important; right: 0px !important;}\r\n #WikiaArticle{overflow: visible !important;}\r\n.wds-avatar-stack, .rail-module .embeddable-discussions-module {z-index: 0;}\r\n .ds_float.br {\r\n    bottom: 54px !important;\r\n    right: 10px;\r\n}\r\n.dspl_number{display: none;}\r\n #ds_mute{  background-color: white !important; border-radius: 20px !important; border:none !important;}\r\n#ds_content_frame_parent{    \r\n    border: none;}\r\n.ds_description{display: none;}\r\n    #ds_content_frame_parent  .ds_float.tr{right: auto; border: none !important; top: auto;}\r\n      .ds_cpp_width{width: 100%;}\r\n      .ds_buttons div:hover{text-decoration:underline; cursor: pointer; display:none;} \r\n      .ds_buttons div{margin:10px 0; display:none;}\r\n      #ds_mute{   background-color: white !important; border-radius: 20px !important; border:none !important; z-index: 10 !important;}\r\n      .ds_thumb_li{list-style: none;}\r\n      .ds_description {    letter-spacing: normal;\r\n      font-weight: bold;  \r\n      font-size: 16px;\r\n      font-style: normal;\r\n      font-stretch: normal;\r\n      line-height: normal;\r\n      text-align: center; position: relative; }\r\n      .ds_bottom {  background: white;} \r\n      #ds_title {\r\n      margin: 1px auto; color: #2b82b8;\r\n      font-family: open sans,sans-serif;\r\n      -webkit-font-smoothing: antialiased;\r\n      line-height: 1.2;\r\n      font-weight: 700;\r\n      }\r\n   <\/style>\r\n   <style>\r\n   #ds_playlist .active .dspl_item{ cursor: pointer;} \r\n \r\n   .ds_cpp  .active .dspl_thumb::before{     content: '\\A';\r\n    width: 0;\r\n    height: 0;\r\n    border-style: solid;\r\n    border-width: 5.5px 8.5px 5.5px 0;\r\n    border-color: transparent #3a3a3a transparent transparent;\r\n    position: absolute;\r\n    left: 8px;\r\n    top: 40px;\r\n}\r\n      #ds_playlist{ font-size: 0.9em ; margin: 0;}\r\n      #ds_playlist .ds_thumb_selected .ds_thumb_title {text-decoration: underline;   }\r\n   #ds_cpp   #ds_playlist .dspl_item{margin: 0;}\r\n      #ds_playlist .dspl_item>span{  display: inline-block;}\r\n.dspl_thumb{\r\n     width: 60px;\r\n    background-repeat: no-repeat;\r\n    background-size: contain;\r\n    margin: 0 5px 5px ;}\r\n\r\n     #ds_playlist .dspl_item {         position: relative;\r\n    display: flex;\r\n    letter-spacing: 0.5px;\r\n    color: #3a3a3a;\r\n    font-size: 16px;\r\n    font-style: normal;\r\n    list-style: none;\r\n    font-stretch: normal;\r\n    line-height: 26px;\r\n    border-bottom: 1px solid lightgrey;\r\n    padding: 21px 0 0px 25px;\r\n    height: 101px;\r\n    margin: 0;\r\n    box-sizing: border-box;\r\n     }\r\n      #ds_playlist   .dspl_item:last-child{border: none;}\r\n \r\n      #ds_playlist{   height: auto !important; min-height: 200px !important;   }\r\n      .dspl_item .dspl_info:hover {cursor: pointer; color: #222;}\r\n.dspl_info{margin: 0 10px;}\r\n      .ds_thumb_active{text-decoration: underline;}\r\n#ds_cpp   #ds_playlist   .dspl_title{ display: inline-block;   text-align: left;   margin: 0;}\r\n      .dspl_duration{display: none;}\r\n     \r\n   <\/style>\r\n \r\n   <h2 class=\"dgv_label\" style=\"\r\n    border: none; display: none;\r\n    margin: 10px auto;\"> See More from Fandom<\/h2>\r\n   <h4 class=\"ds_title\" style=\"text-align: left;line-height: 28px;width: 100%;text-transform: uppercase;cursor: auto; font-weight: bold; display: none;\">Popular Pages<\/h4>{{dstracker}}\r\n   <div class=\"ds_cpp_inner ds_cpp_width\" id=\"ds_cpp_inner\" style=\"z-index: 30;position: relative;background: #fff;display: flex;\">\r\n      <div class=\"ds_trace\" id=\"ds_trace\" style=\"position: absolute; bottom: 34px; right: -1px; width: 1px; display:none;\"><\/div>\r\n     <div class=\"ds_description\" style=\"\">\r\n         <h1 class=\"ds_header \" style=\"vertical-align: top;margin: auto 10px;font-size: 23px;text-align: left; \">Recommended<\/h1>\r\n      <\/div>\r\n      <div class=\"ds_background \" onmouseenter=\"dsTitleMouseEnter()\" onmouseleave=\"dsTitleMouseLeave()\"  id=\"ds_background\" style=\"margin: 0px;z-index: 60;position: relative;border-radius: 5px;width: 100%; max-width: 645px;\">\r\n<div class=\"ds_close\" id=\"ds_close\" style=\"position: absolute;right: 4px;top: 4px;background-color : white;border-radius: 5px;background: url(\/\/distroscale.s3.amazonaws.com\/uploads\/apps.distroscale.com\/583faf844cbf5414\/icon-close-2x.png);height: 15px;width: 15px;background-repeat: no-repeat;background-position: center;z-index: 999;cursor: pointer;\"><\/div>\r\n      <h3  class=\"ds_title \" style=\"text-align: left; line-height: 22px; width: 100%; text-decoration: none; min-height: 45px; position: absolute; top: 0px; z-index: 7; background: rgba(0, 0, 0, 0.53); color: white; margin: 0px; padding: 15px 0px 0px 59px; box-sizing: border-box; cursor: pointer; opacity: 0; font-weight: 400;\"> <\/h3>\r\n        <div class=\"ds_body\" id=\"ds_body\" style=\"margin: 0;z-index:80; width: 100%;\"> <div id=\"ds_cpp_dock\" style=\"display: block;\">\r\n            <div class=\"ds_sponsorbox\" style=\"text-align: right;position: absolute;bottom: 8px;right: 8px;font-size:9px;margin:0px;z-index:11;\">\r\n               <a class=\"chicletlink\" href=\"\/\/www.distro.tv\/?utm_source=dstream&utm_medium=chiclet&utm_content=chiclet&utm_campaign=dtv_dstream\" target=\"_blank\">{{dstracker}}\r\n               <img alt=\"dslogo\" class=\"chicletimg\" src=\"\/\/a.jsrdn.com\/creatives\/site_logos\/dslogo_sm.png\" style=\"height:15px;width:15px;\" scale=\"0\">\r\n               <\/a>\r\n            <\/div>\r\n            <div class=\"ds_dgv_label\" style=\"text-align: left;width:100%;margin: 0px auto !important;padding: 0px;border: none;background: black;color: white;height: 30px;display: flex;padding: 10px 10px 3px;box-sizing: border-box;position: absolute;top: -30px;\">\r\n               \r\n            <\/div>\r\n         <div class=\"ds_dgv_label\" style=\"text-align: left;width:100%;margin: 0px auto !important;padding: 0px;border: none;background: black;color: white;height: 30px;display: flex;padding: 10px 10px 3px;box-sizing: border-box;position: absolute;bottom: -30px;\">\r\n               \r\n            <\/div>\r\n  <\/div>\r\n\r\n{{body.long}}<\/div>\r\n         <div class=\"ds_advert_cover_holder\" style=\"text-align: left;font-size: 18px;position: relative;width:100%;z-index: 11;height: 70px;display: block;text-decoration: none;width: 100%;font-size: 17px;line-height: 1.2;padding: 4px 0;overflow: hidden; display: none;\">\r\n            <div class=\"ds_advert_cover\" style=\"background: white; height: 75px; top: 0px; left: 0px; position: absolute; display: none; width: 100%; z-index: 88;\">\r\n               <p style=\"padding: 0px 0 0 0; color : grey; font-weight: normal; text-transform: uppercase; font-size: 15px; text-align: center;\">Advertisement<\/p>\r\n            <\/div>\r\n         <\/div>\r\n      <\/div>\r\n \r\n      <\/div>\r\n<div class=\"ds_rightbar\" id=\"ds_rightbar\" style=\"height: 250px; width: 405px; background: none; display: none; margin: 20px auto;\"><\/div>\r\n\r\n<\/div>","insert_at":1,"insert_action":"before","link":"","share_link":"","code":{"prerender":function(meta){var player = vx.ww.document.querySelectorAll('#incontent_player');
if(player){
for (var i=0; i<player.length; i++) {
			var params = player[i].getAttribute('data-gpt-page-params');
			if (params) {
				var  retVal1 = params;
			

			} 
            params = player[i].getAttribute('data-gpt-slot-params');
            if (params) {
				var retVal2 = params;
			

			}
}
if(retVal1 &&retVal2){

} else{
       throw 'No params';
}
}
				var top_boxads = vx.ww.document.querySelectorAll('#top_boxad');
				if (top_boxads) {
					for (var j = 0; j < top_boxads.length; j++) {
						var params = top_boxads[j].getAttribute('data-gpt-slot-params');
						if (params) {
							var json_params = JSON.parse(params);
							// if we have a uap parameter and it is a number greater than 0
							if (json_params && json_params.uap && !isNaN(json_params.uap) && parseInt(json_params.uap) > 0) {
								throw 'we have a UAP parameter';
							}
						}
					}
				}},"postrender":function(meta,rendered){
vx.gdprCookie="euconsent-v2";
function renderContinue() {
(function(e) {
function mouseOver() {
var elem =     e.document.querySelector(".ds_title_dock"); 
if(elem){elem.style.opacity = "1";}
       elem = e.document.querySelector(".ds_background>.ds_title");
if(elem){elem.style.opacity = "1";
}
}
e.dsTitleMouseEnter=mouseOver;
function mouseOut() {
   var elem=  e.document.querySelector(".ds_title_dock");
if (elem){elem.style.opacity = "0";}
 elem = e.document.querySelector(".ds_background>.ds_title"); if (elem){elem.style.opacity = "0";}
}   
e.dsTitleMouseLeave=mouseOut;
})(vx.ww);

var ds_close_time = setInterval(function() {
	var ds_close = vx.ww.document.getElementById("ds_close");
	if (ds_close) {
		ds_close.addEventListener("click", function() {
			var ds_cpp = vx.ww.document.getElementById("ds_cpp");
			if (ds_cpp) {
				ds_cpp.parentNode.removeChild(ds_cpp);
			}
		}, );
		clearInterval(ds_close_time);
	}
}, 6000);

// DESKTOP DOCKING
(function() {
  var referenceElem = vx.ww.document.getElementById("ds_cpp");
  var elemToMove = vx.ww.document.getElementById("ds_content_frame_parent");
  var closeButton = vx.ww.document.getElementById("ds_float_close");
  var dscppDock = vx.ww.document.getElementById("ds_cpp_dock");
  if (!referenceElem || !elemToMove || !closeButton || !dscppDock) {
    return;
  }

  var ds = referenceElem.getAttribute('data-dvp_dockspec');
  var dt = referenceElem.getAttribute('data-dvp_docktrigger');
  var mdc = referenceElem.getAttribute('data-dvp_maxdockcount');
  var cs = referenceElem.getAttribute('data-dvp_closescope');
  var cd = referenceElem.getAttribute('data-dvp_closedelay');
  var da = referenceElem.getAttribute('data-dvp_dockavoid');
  var daw = referenceElem.getAttribute('data-dvp_dockavoidwidth');
  var daa = referenceElem.getAttribute('data-dvp_dockavoidabove');
  var dab = referenceElem.getAttribute('data-dvp_dockavoidbelow');
  var dat = referenceElem.getAttribute('data-dvp_dockavoidtouch');

  //*========== DEFAULT SETTINGS ====================================================*//
  var dockSpec = ds ? ds : ""; // position/width/height eg. br/450/254
  var dockTrigger = dt ? dt : "none" // oov, oovplaying, none
  var maxDockCount = mdc ? +mdc : 100000; // max number of docks
  var closeScope = cs ? cs : "none"; // pageview, 1time, none
  var closeDelay = cd ? +cd : 5; // how many seconds to delay showing close-button
  var avoid = da ? da.split("|") : []; // put querySelector string. unit will not dock when at least one of these elements are visible.
  var avoidWidth = daw ? parseInt(daw, 10) : null; // lower bound for width of browser to stop docking
  var avoidAbove = daa ? daa.split("|") : []; // put querySelector string. unit will not dock when at least one of these elements are visible and anywhere above it on the page.
  var avoidBelow = dab ? dab.split("|") : []; // put querySelector string. unit will not dock when at least one of these elements are visible and anywhere below it on the page.
  var avoidTouch = dat ? dat.split("|") : []; // put querySelector string. unit will not dock when it touches the element.
  //*========================================================================*//

  var dockSpecSplit = dockSpec.split("/");
  var closeButtonDelayQuota = 100000;
  var qualifyPercentage = 50;
  var state = "original";
  var closeButtonTimeout, closed, redocked;
  var stayDocked;

  var adImpCount=0;
  var adBreakCount=0;
  vx.adimpression=function() {
    if (state=='dock') {
//console&&console.log&&console.log("cduan1");
  	adImpCount++;
    }
  };
  vx.adbreakfinished=function() {
    if (state=='dock') {
//console&&console.log&&console.log("cduan3");
  	adBreakCount++;
    }
  	if (!closed&&(adImpCount>0||adBreakCount>2)) {
  		// disable dock
  		closed = true;
  		stayDocked = false;
  		if (state=='dock') {
  			state=='original';
  			undock();
  		} 
  	}
  };

  init();
  fandomHide();
  function fandomHide(){
   if(referenceElem&&elemToMove){
    referenceElem.style.height = "5px";
    } else  {
    sleep(1000);
    referenceElem.style.height = "5px";
     }


  }



  function init() {
    elemToMove.appendChild(dscppDock);
    dscppDock.style.display = "none";
    if (dockTrigger === "none") {
      return;
    } else if (dockTrigger === "oovplaying") {
      vx.dockCheckInview = checkInview;
    }
    if (closeScope !== "none") {
      vx.addListener(closeButton, "click", function() {
        vx.dvptrack('cl');
        closed = true;
        stayDocked = false;
        undock();
        // only needed if want to kill the unit when closed
        // referenceElem.parentNode.removeChild(ds_cpp);
      });
    }
    checkInview();
  vx.checkInviewInterval=  setInterval(function() {
      checkInview();
    }, 1000);
    vx.addListener(vx.ww, "scroll", checkInview);
  }

  function checkInview(msg) {
    if (msg === "contentpause" || msg === "contentplay") {
      state = null;
    }
    if (msg === "contentpause" && dockTrigger === "oovplaying") {
      stayDocked = true;
    }
    var elemToMoveRT = elemToMove ? elemToMove.getBoundingClientRect() : null;
    var dsMute = vx.ww.document.getElementById("ds_mute");
    if (dsMute && elemToMoveRT) {
      if (state === "dock" && dsMute.style.position !== "fixed" && elemToMove.style.visibility !== "hidden") {
//        dsMute.style.position = "fixed";
//        dsMute.style.top = elemToMoveRT.top + 10 + "px";
//        dsMute.style.left = elemToMoveRT.left + 10 + "px";
      } else if ((state === "original" && dsMute.style.position !== "absolute") || (state === "dock" && elemToMove.style.visibility === "hidden")) {
        dsMute.style.position = "absolute";
        dsMute.style.top = "10px";
        dsMute.style.left = "10px";
      }
    }
    if (dsMute && dscppDock && dscppDock.parentNode != dsMute.parentNode) {
        dscppDock.parentNode.insertBefore(dsMute, dscppDock);
    }
    var dsAdppEl = vx.ww.document.getElementById("ds_adpp");
    if (dsAdppEl && dscppDock && dscppDock.parentNode != dsAdppEl.parentNode) {
        dscppDock.parentNode.insertBefore(dsAdppEl, dscppDock);
    }
      var ds_body = vx.ww.document.getElementById("ds_body");
       var cppRT = ds_body.getBoundingClientRect();
    var viewablePercent = vx.inview2.getViewablePercent(referenceElem, vx.ww);
    var windowWidth = vx.ww.innerWidth || vx.ww.document.documentElement.clientWidth || vx.ww.document.body.clientWidth; 
    if(viewablePercent >0){referenceElem.style.height = "364px"; }
    if(viewablePercent>50){
        dscppDock.className="ds_dock";
    }
var header = vx.ww.document.querySelector("#WikiaArticle") || vx.ww.document.querySelector(".WikiaArticle");
    var referenceElemRT =  header.getBoundingClientRect();
    if (viewablePercent < qualifyPercentage && (!avoidWidth || avoidWidth <= windowWidth ) && dscppDock.className==="ds_dock" && referenceElemRT.top<0) {
      if (state !== "dock" && (dockTrigger === "oov" || (dockTrigger === "oovplaying" && vx.ww.vx.adPlaying) || stayDocked)) {
       
        state = "dock";
        switch (closeScope) {
          case "pageview":
            if (closed) return;
            break;
            // case "1time":
            //  if (closed && !redocked) {
            //      redocked = true;
            //  } else if (closed && redocked) {
            //      return;
            //  }
            //  break;
        }
        dock();
      } else if (dockTrigger === "oovplaying" && !vx.ww.vx.adPlaying && !stayDocked) {
        undock();
      }
    } else {
      if (state !== "original") {
        state = "original";
        if (!vx.ww.vx.adPlaying) stayDocked = false;
        undock();
      }
    }

    if (state === "dock") {
      var visible = true;
      if (avoid.length > 0) {
        for (var i = 0; i < avoid.length; i++) {
          var avoidElem = vx.ww.document.querySelector(avoid[i]);
          var winheight = vx.ww.innerHeight || vx.ww.document.documentElement.clientHeight || vx.ww.document.body.clientHeight;
          if (avoidElem && winheight) {
            var avoidRT = avoidElem.getBoundingClientRect();
            if (avoidRT.bottom > winheight - 270) {
              visible = false;
              break;
            } 
          }
        }
      }
      if (avoidAbove.length > 0) {
        for (var i = 0; i < avoidAbove.length; i++) {
          var avoidElem = vx.ww.document.querySelector(avoidAbove[i]);
          var winheight = vx.ww.innerHeight || vx.ww.document.documentElement.clientHeight || vx.ww.document.body.clientHeight;
          if (avoidElem && winheight) {
            var avoidRT = avoidElem.getBoundingClientRect();
            if (avoidRT.bottom > 0) {
              visible = false;
              break;
            }
          }
        }
      }
      if (avoidBelow.length > 0) {
        for (var i = 0; i < avoidBelow.length; i++) {
          var avoidElem = vx.ww.document.querySelector(avoidBelow[i]);
          var winheight = vx.ww.innerHeight || vx.ww.document.documentElement.clientHeight || vx.ww.document.body.clientHeight;
          if (avoidElem && winheight) {
            var avoidRT = avoidElem.getBoundingClientRect();
            if (avoidRT.top < winheight || avoidRT.top < 0) {
              visible = false;
              break;
            }
          }
        }
      }
      if (avoidTouch.length > 0) {
        for (var i = 0; i < avoidTouch.length; i++) {
          var avoidElem = vx.ww.document.querySelector(avoidTouch[i]);
          if (avoidElem) {
            var avoidRT = avoidElem.getBoundingClientRect();
            var elemToMoveRT = elemToMove.getBoundingClientRect();
            if (areElemsTouching(avoidRT, elemToMoveRT)) {
              visible = false;
              break;
            }
          }
        }
      }
      elemToMove.style.visibility = visible ? "visible" : "hidden";
    } else {
      elemToMove.style.visibility = "visible";
    }
  }

  function areElemsTouching(rect1, rect2) {
    if (rect1.left < rect2.left + rect2.width &&
      rect1.left + rect1.width > rect2.left &&
      rect1.top < rect2.top + rect2.height &&
      rect1.height + rect1.top > rect2.top) {
        return true;
    } else {
      return false;
    }
  }

  function isElementInViewport(el) {
    var rect = el.getBoundingClientRect();
    return (
    rect.bottom > 0 && rect.right > 0 && rect.left < (vx.ww.innerWidth || vx.ww.document.documentElement.clientWidth) && rect.top < (vx.ww.innerHeight || vx.ww.document.documentElement.clientHeight))
  }

  function dock() {
    if (maxDockCount === 0) {
      return;
    } else {
      maxDockCount--;
    }
    if (vx.adPlaying) {
//console&&console.log&&console.log("cduan2");
      adImpCount++;
    }
    if (closeScope !== "none") {
      if (closeButtonDelayQuota > 0) {
        closeButtonTimeout = setTimeout(function() {
          closeButton.style.display = "block";
          closeButtonDelayQuota--;
        }, closeDelay * 1000);
      } else {
        closeButton.style.display = "block";
      }
    }

    if (!vx.dockFirstResize) vx.dockFirstResize = true; // to stop readjustment in post whenAvailable2
    dscppDock.style.display = "block";
    elemToMove.style.boxSizing = "content-box";
    if (dockSpecSplit[0] === "t") {
      elemToMove.className = elemToMove.className ? (elemToMove.className + ' ds_float ') : 'ds_float ';
      var refElemRT = referenceElem.getBoundingClientRect();
      var totalLeft = refElemRT.left + refElemRT.width / 2 - dockSpecSplit[1] / 2;
      elemToMove.style.top = "0";
      elemToMove.style.left = totalLeft + "px";
      closeButton.style.top = (dockSpecSplit[2] - 12) + "px";
    } else {
      elemToMove.className = elemToMove.className ? (elemToMove.className + ' ds_float ' + dockSpecSplit[0]) : 'ds_float ' + dockSpecSplit[0];
    }
    elemToMove.style.width = dockSpecSplit[1] + "px";
    elemToMove.style.height = dockSpecSplit[2] + "px";
    var actionDivEl = elemToMove.querySelectorAll("div");
    for (var i = 0; i < actionDivEl.length; i++) {
      if (actionDivEl[i].id.length == 0 && actionDivEl[i].className.length == 0) {
        actionDivEl[i].style.height = dockSpecSplit[2] - 32 + "px";
        break;
      }
    }
    var adEl = vx.ww.document.getElementById("ds_ad_container");
    if (adEl) {
      adEl.style.width = dockSpecSplit[1] + "px";
      adEl.style.height = dockSpecSplit[2] + "px";
      if (vx.adManager && vx.adManager.activeAd && vx.adManager.activeAd.ifr) {
        vx.adManager.sendMessage(vx.adManager.activeAd.ifr, "resizeMe", {
          "width": dockSpecSplit[1],
          "height": dockSpecSplit[2]
        });
      }
    }
    var ctEl = vx.ww.document.getElementById("ds_content_frame");
    if (ctEl) {
      ctEl.style.width = dockSpecSplit[1] + "px";
      ctEl.style.height = dockSpecSplit[2] + "px";
    }
  }

  function undock() {
    if (closeScope !== "none") {
      clearTimeout(closeButtonTimeout);
      closeButton.style.display = "none";
    }

    dscppDock.style.display = "none";
    elemToMove.style.boxSizing = "border-box";
    if (dockSpecSplit[0] === "t") {
      elemToMove.style.top = "auto";
      elemToMove.style.bottom = "auto";
      elemToMove.style.right = "auto";
      elemToMove.style.left = "auto";
      closeButton.style.top = "auto";
    }
    elemToMove.className = elemToMove.className ? elemToMove.className.replace(new RegExp('(^|\\b)(ds_float)(\\b|$)', 'gi'), ' ') : '';
    elemToMove.className = elemToMove.className ? elemToMove.className.replace(new RegExp('(^|\\b)(tl|tr|bl|br|ct)(\\b|$)', 'gi'), ' ') : '';
    elemToMove.style.width = vx.dvp_width + "px";
    elemToMove.style.height = vx.dvp_height + "px";

    var actionDivEl = elemToMove.querySelectorAll("div");
    for (var i = 0; i < actionDivEl.length; i++) {
      if (actionDivEl[i].id.length == 0 && actionDivEl[i].className.length == 0) {
        actionDivEl[i].style.height = vx.dvp_height - 32 + "px";
        break;
      }
    }
    var adEl = vx.ww.document.getElementById("ds_ad_container");
    if (adEl) {
      adEl.style.width = vx.dvp_width + "px";
      adEl.style.height = vx.dvp_height + "px";
      if (vx.adManager && vx.adManager.activeAd && vx.adManager.activeAd.ifr) {
        vx.adManager.sendMessage(vx.adManager.activeAd.ifr, "resizeMe", {
          "width": vx.dvp_width,
          "height": vx.dvp_height
        });
      }
    }
    var ctEl = vx.ww.document.getElementById("ds_content_frame");
    if (ctEl) {
      ctEl.style.width = vx.dvp_width + "px";
      ctEl.style.height = vx.dvp_height + "px";
    }
  }
})();
	
}

renderContinue();
}}}});

